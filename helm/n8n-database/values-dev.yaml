# Global settings
global:
  storageClass: ""

# Override the fullname to simplify service discovery
fullnameOverride: "n8n-database"

# Namespace
namespace: n8n-development

# PostgreSQL configuration
postgres:
  image:
    repository: postgres
    tag: "15-alpine"
    pullPolicy: IfNotPresent
  
  # Authentication
  auth:
    database: "n8n"
    username: "postgres"  # Superuser
    password: "postgres123"  # Superuser password - Change in production!
    appUsername: "n8n"  # Application user (non-root)
    appPassword: "n8n_dev_pass123"  # Application password
    existingSecret: ""  # Use existing secret instead
  
  # Resources
  resources:
    limits:
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 256Mi
  
  # Persistence
  persistence:
    enabled: true
    storageClass: ""
    size: 8Gi
    accessModes:
      - ReadWriteOnce
  
  # Security
  securityContext:
    enabled: true
    runAsUser: 999
    runAsGroup: 999
    fsGroup: 999
  
  # Service configuration
  service:
    type: ClusterIP
    port: 5432
    annotations: {}
  
  # PostgreSQL configuration
  postgresqlConfiguration:
    max_connections: 100
    shared_buffers: 128MB
    effective_cache_size: 512MB
    maintenance_work_mem: 64MB
    checkpoint_completion_target: 0.9
    wal_buffers: 16MB
    default_statistics_target: 100

# Monitoring
monitoring:
  enabled: false
  serviceMonitor:
    enabled: false

# Network Policy
networkPolicy:
  enabled: false
  allowedNamespaces: []
